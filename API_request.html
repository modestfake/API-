<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Document</title>
  
  <link rel="stylesheet" href="style.css">

  
</head>
 <body>
  <table cellspacing="0" cellpadding="0" id="maket">
   <tr> 
    <th id="leftcol">
      <form id="formLeftCol">
        <button id="buttonRepos">
        Get repos
    </button>
      </form>  
    </th> 

  <th id="rightcol">
    <form id="formRightCol">
      <button id="buttonFollowers">
        Get followers
      </button>
    </form>
  </th>
   </tr>  
   <tr>
     <td id="leftcol2"> Место для репозиториев
      <div id="listRepos">
        
      </div>>
     </td>
     <td id="rightcol2"> Место для подписчиков 
      <div id="listAllow">
        <div id="listFollowers">
        
        </div>>
      </div>>
     </td>
   </tr>
  </table>


<script>
let requestURLRepos = 'https://api.github.com/users/modestfake/repos';
let requestURLFollow = 'https://api.github.com/users/modestfake/followers';

let listRepos = document.getElementById("listRepos");
let buttonRepos = document.getElementById("buttonRepos");
let listFollowers = document.getElementById("listFollowers");
let buttonFollowers = document.getElementById("buttonFollowers");



function get(url) {
    return fetch(url, {
      method: 'get'
    });
}
function getJSON(url, addRequestToApiGitHub) {
    return get(url).then(function(response) {
      // Handle network errors
      if (!response.ok) {
        throw Error(response.statusText ? response.statusText : 'Unknown network error')
      }

      return response.json();
    })
    .then(function(response) {
       addRequestToApiGitHub(response)
       console.log(response)
    })
    .catch(function(err) {
        console.log('Error') 
    });
}

buttonRepos.addEventListener("click", function(event){
          event.preventDefault();
          getJSON(requestURLRepos, renderRepos)});

buttonFollowers.addEventListener("click", function(event){
          event.preventDefault();
          getJSON(requestURLFollow, renderFollow)});



function renderRepos(objJson){
  
   objJson.forEach(elemReros => { 

      let myList = document.createElement('ul');
      let myRepos = document.createElement('li');
      
      myRepos.textContent = `Repository name:  ${elemReros.name} 
                            Link:  ${elemReros['html_url']} 
                            Amount of stars: ${elemReros['stargazers_count']}`;
      
      myList.appendChild(myRepos);
      listRepos.appendChild(myList);
      
    })
}

function renderFollow(objJson){
  
   objJson.forEach(elemFollows => { 

      let myFollowList = document.createElement('ul');
      let myFollow = document.createElement('li');
      
      myFollow.textContent = `User name: ${elemFollows.login} 
                              Link:  ${elemFollows['html_url']}`;
      
      myFollowList.appendChild(myFollow);
      listFollowers.appendChild(myFollowList);
      
    })
 }
</script>
</body>
</html>